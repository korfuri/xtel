.\" Copyright (c) 1991-98 Lectra-Systemes
.\" $Id: xtel.man,v 1.10 1998/10/02 15:09:58 pierre Exp $
.TH XTEL 1 "Lectra-Systemes" "10/98"
.UC 5
.SH NOM
xtel \- Emulateur MINITEL 
.SH SYNOPSIS
xtel [-petit] [-ng] [-br] [-low] [-e] [-serveur serveur_xtel] [-service service_xtel] [options_standards Xt] [fichier_videotex]
.SH DESCRIPTION
.I xtel
est un émulateur de Minitel 1B/2 ou TVR (Télétel Vitesse Rapide destiné à 
X11R4/R5/R6 . Il permet de plus la sauvegarde et le décodage hors-ligne de 
pages vidéotex. Ce client fonctionne sur écran couleur, niveaux de gris ou 
bien monochrome.
.SH OPTIONS
.TP
.B "\-ng"
 Niveaux de gris : dans le cas d'un écran couleur, on utilise des niveaux de gris
et non pas des couleurs (comme sur le vrai Minitel).
.TP
.B "\-petit"
 Petit ecran : la taille de l'écran d'émulation est de 320 x 250 pixels. Cela tient
moins de place mais c'est peu lisible dans le cas d'un écran monochrome de taille
courante (15" ou 16").
.TP
.B "\-serveur"
 Nom de la machine serveur (supportant xteld). On peut également spécifier 
le nom du serveur par la ressource \fBserveur\fP .
.TP
.B "\-service"
 Nom du service de \fI/etc/services\fP a utiliser. On peut également spécifier le
nom du service par la ressource \fBnomService\fP .
.TP
.B "\-br"
 Permet de spécifier la présence du bouton \fIRaccrocher\fP dans le popup-menu du
clavier Minitel (utilise si le modem ne gère pas le signal DCD).
.TP
.B "\-low"
 Supprime l'affichage des jolis boutons (et limite la consommation mémoire). 
.TP
.B "\-e, --exec-procedure"
 Nom de la procédure a démarrer au lancement de XTel. Cette procédure doit
être définie dans le fichier \fI$HOME/.xtel/procedures\fP 
(ou \fI$HOME/.xtelproc\fP par compatibilité).
.TP
.B "\-private"
 Force l'utilisation d'une colormap privée (à utiliser dans le cas d'un nombre
insuffisant de couleurs disponible dans la colormap par défaut).
.SH UTILISATION
.LP
Après lancement du programme, on peut sélectionner 3, 4, 5 ou 6 menus déroulants 
en haut de la fenêtre. 
.LP
Le menu 
.B Fichier
contient les entrées :
.sp
.I "Charge l'enregistrement"
 Charge un enregistrement en mémoire (il sera exploité grâce à la fonction \fIlecteur\fP
du menu suivant) .
.sp
.I "Sauve l'enregistrement"
 Sauve ce qui a été enregistré sur un fichier.
.sp
.I "Imprime"
 Imprime la page courante.
.sp
.I "Quitte"
 Quitte le programme.
.LP 2
Le menu 
.B Enregistrement
Permet de controler l'enregistrement des pages Vidéotex. Il contient les entrées :
.sp
.I "Nouvel enregistrement"
 Initialise la zone d'enregistrement (ce qui était enregistré est perdu).
.sp
.I "Demarre"
 Valide l'enregistrement, tout ce qui est affiché sur l'écran est sauvé en memoire.
.sp
.I "Arrête"
 Stoppe l'enregistrement
.sp
.I "Lecteur"
 Appele le lecteur d'enregistrement (fonction magnétoscope). Les fonctions du 
lecteur sont :
.LP
.in +7
.nf
|<<        Début de page
<<         Page précédente
[]         Stop
>          Lecture
>>         Page suivante	
.fi
.in -7
.sp
.PP
Le lecteur permet de suspendre la lecture sur le caractères \fIForm Feed\fP 
(qui représente un changement de page en Vidéotex) ou bien la commande 
\fISUITE\fP souvent utilisée pour afficher les informations suivantes. Les
deux conditions peuvent être combinées (SUITE ou FF). La valeur par défaut 
est \fI"Pas d'arrêt"\fP, il faut cliquer sur cette chaine pour définir une
condition d'arrêt.
.LP 2
Le menu 
.B Services
est créé au début en interrogeant le démon \fIxteld\fP . Dans le cas ou le modem est
un Minitel 1/1B, ce menu n'est pas affiché (l'utilisateur compose a la main). Pour
établir la connexion avec le service, il faut OBLIGATOIREMENT utiliser le bouton
CONNEXION/FIN de XTEL (et non celui du Minitel). Par contre, on peut libérer la ligne
en utilisant le bouton CX/FIN du Minitel.
.LP 2
Le menu 
.B Procédures
est créé si le fichier \fI$HOME/.xtel/procedures\fP (ou 
\fI$HOME/.xtelproc\fP)
existe. Il permet de definir des procedures
d'interrogation de serveurs Télétel (composition puis envoi automatique de chaines
ou de touches Minitel sur reconnaissance d'un texte particulier). 
.sp
Dans le cas ou le modem est un M1/M1B, l'utilisateur devra composer à la main le
numéro du service et sélectionner la procédure pour établir la connexion (au lieu 
d'utiliser le CONNEXION/FIN).
.LP
La syntaxe du fichier \fIprocedures\fP est la suivante :
.sp
.in +7
.nf

procedure nom_de_procédure
service numéro_de_service
liste_de_commandes

.fi
.in -7
.LP
Les commandes disponibles sont les suivantes avec les raccourcis (une lettre)
entre parenthèses. Les raccourcis choisis font en sorte que les fichiers
déja ecrits avec une version antérieure soient compatibles.
.sp
.in +7
.nf
	waitfor	chaine_de_caractères	(A)
	transmit chaine_de_caractères	(E)
	record on/off			(R)
	write nom_de_fichier		(W)
	hangup				(H)
	exit				(X)
.fi
.in -7
.PP
Pour émettre des commandes Minitel (ENVOI, RETOUR, etc), on utilise la syntaxe
suivante dans la chaine à émettre :
.sp
.in +7
.nf
	ENVOI                 \\A
	RETOUR                \\B
	REPETITION            \\C
	GUIDE                 \\D
	ANNULATION            \\E
	SOMMAIRE              \\F
	CORRECTION            \\G
	SUITE                 \\H
	CONNEXION_FIN         \\I
.fi
.in -7
.LP
Par exemple :
.sp
.in +7
.nf

P Ficheux
S 3611
waitfor reste
record on
transmit FICHEUX\\H\\HBORDEAUX\\A
waitfor Suite
write /tmp/f.vdt
record off
exit

.fi
.in -7
.LP
.PP
Par exemple, la procédure \fIFicheux\fP recherche le numéro de l'abonne FICHEUX
sur l'annuaire électronique, enregistre le résultat dans le fichier 
\fI/tmp/f.vdt\fP et sort de \fIXTel\fP.

.sp

.LP 2
Le menu 
.B Protocoles
permet d'utiliser des protocoles pour télécharger des fichiers à travers XTel.
Ce menu existe si le fichier \fI$HOME/.xtel/protocols\fP
(ou \fI$HOME/.xtelproto\fP)
existe. 
.LP
La syntaxe du fichier \fIprotocoles\fP est la suivante :
.sp
.in +7
.nf

Nom_de_protocole,Nom_de_la_commande

.fi
.in -7
.LP
La commande correspond à un exécutable permettant de gérer le protocole 
spécifié, par exemple:
.sp
.in +7
.nf

Z-Modem,/usr/bin/rz

.fi
.in -7
.LP
La commande doit utiliser \fBstdin/stdout\fP pour ses entrées/sorties et 
afficher les messages eventuels sur \fBstderr\fP.
.LP 2
Le menu 
.B Xtel
permet d'obtenir des informations sur la version et la configuration du programme.
.LP 2
L'emulation des touches du Minitel (Envoi, Retour, etc...) est realisée par un 
popup-menu accessible par \fBBouton 2\fP. Les raccourcis clavier sont indiqués dans
le menu. Ce meme menu permet de selectionner le mode d'émulation (Vidéotex,
Télé-informatique ASCII, Télé-informatique français). A partir de la version
3.1, les touches sont également accessible directement en dessous de l'ecran
Minitel (sauf si l'option \fBlowMemory\fP est activée).
.sp
XTEL fait de la reconnaissance de chaine de caractères dans la page Minitel, c'est à
dire que l'on peut cliquer
.B directement
dans la page les chaines correspondant aux touches Minitel (Envoi, Retour, etc...) ou 
par défaut aux valeurs a saisir (\fBBouton 1\fP).
.sp
On peut obtenir une approximation ASCII de la page courante sur la sortie standard en 
cliquant sur \fBBouton 3\fP.
.SH RESSOURCES
XTEL utilise les ressources spécifiques suivantes :
.PP
.TP 8
.B petiteFonte 
 Spécifie la petite fonte (void option -petit)
.TP 8
.B serveur 
 Spécifie le serveur XTEL (void option -serveur)
.TP 8
.B commandeImpression 
 Spécifie la commande pour imprimer la page courante
.TP 8
.B nomService
 Spécifie le nom du service TCP (xtel, par defaut)
.TP 8
.B boutonRaccrocher
 Spécifie la presence du bouton "Raccrocher"
.TP 8
.B lowMemory
 Pas de jolis boutons
.TP 8
.B privateColormap
 Force une colormap privée
.SH "VOIR AUSSI"
X(1) xteld
.SH BUGS
.LP
Le décodage des pages photographiques (TVR) est certainement incomplet. De plus
l'allocation des couleurs sur un ecran 256 couleurs peut poser des problèmes
en cas d'images JPEG affichées sur une même page.
.SH FICHIERS
.in +7
.nf
/usr/X11R6/lib/X11/app-defaults/XTel
/usr/X11R6/lib/X11/app-defaults/XTelm
$HOME/.xtel/procedures
$HOME/.xtel/protocols
.fi
.in -7
.SH COPYRIGHT
Copyright 1991-98, LECTRA-SYSTEMES et Pierre FICHEUX
.SH AUTEUR
Pierre FICHEUX  R&D  LECTRA-SYSTEMES ZI Marticot 33610 Cestas FRANCE
